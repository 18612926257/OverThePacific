<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css' rel='stylesheet' />
<script src="js/res-operations.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<link rel="stylesheet" type="text/css" href="css/res-details.css" />


<div class="nav_container ">
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="topnav">
				<a class="navbar-brand" href="/">Restaurants</a>
			</div>
			<form action="." method="post" class="navbar-form navbar-left">
				<div class="form-group">
					<input type="text" class="form-control" name="search" id="txtSearch" placeholder="Search">
				</div>
				<button type="submit" class="btn btn-default">Search</button>
			</form>
		</div>
	</nav>
</div>

<div class="container">
    <div class="leaderboard">
	    <span style="margin-right: 20%; line-height: 20px">
		    <h1 class="restaurantName" business_id={{restaurant.business_id}}>{{restaurant.name}}</h1>
		    <p><strong>Opening Hours:</strong>Weekday: {{openHours.monday}} , Weekend: {{openHours.saturday}}</p>
		    <p><strong>Address: </strong>{{restaurant.address}}.  <strong> City:</strong> {{restaurant.city}}</p>
		    <p><strong>Category:</strong> {{restaurant.categories}} </p>
		    <a class="btn btn-success btn-large" onclick="window.open('https://www.google.com/maps/place/{{restaurant.address}}')">Navigation</a></p>
        </span>
<div id='map' style="width:100%;height:300px;position: center;" latitude= "{{restaurant.latitude}}" longitude={{restaurant.longitude}}></div>
            <script>
            const mapDiv = document.querySelector("#map");
            let latitude=mapDiv.getAttribute("latitude");
            let longitude=mapDiv.getAttribute("longitude");
            console.log("latitude: " +latitude + " longitude "+longitude);
               mapboxgl.accessToken = 'pk.eyJ1IjoicnJyaXRhIiwiYSI6ImNrdG5yY3BjdDA1bjYydXA5eDdlbTd5NWwifQ.N5Er1reEz5n4TyLVOIOo2A';
                const map = new mapboxgl.Map({
                    container: 'map',
                    style: 'mapbox://styles/mapbox/streets-v11', // style URL
                    center: [longitude, latitude], // starting position [lng, lat]
                    zoom: 13 // starting zoom
                });
                const marker = new mapboxgl.Marke
                    .setLngLat([longitude, latitude])
                    .addTo(map);
            </script>

    	<link rel="stylesheet" type="text/css" href="//www.jq22.com/jquery/font-awesome.4.6.0.css">
		<div id="wrapper" >
            <input type="radio" class="stars" id="1" name="star" />
            <label for="star1" class="lables"></label>
            <input type="radio" class="stars" id="2" name="star" />
            <label for="star2" class="lables"></label>
            <input type="radio" class="stars" id="3" name="star" />
            <label for="star3" class="lables"></label>
            <input type="radio" class="stars" id="4" name="star" />
            <label for="star4" class="lables"></label>
            <input type="radio" class="stars" id="5" name="star" checked/>
            <label for="star5" class="lables"></label>

        </div>
		<div class="Input_Box" >
		    <textarea class="Input_text"  placeholder="Login to add your review here, less than 300 words. "  {{#if disableReview}} disabled {{/if}}   ></textarea>
		</div>
	    <br>
		<button id="button1" class="btn btn-success" id="button1" style="float:left" {{#if disableReview}} disabled {{/if}} >Submit</button>
	</div>

	<h5 class="page-header"></h5>
    <div class="comments" id="comments" >
            <h1>{{starsDisplay}} </h1>
            <p>{{restaurant.review_count}} comments</p>
            <div class="line"></div>
            {{#each reviews}}
            <div class="comment">
                <h4><mark>By {{this.name}}</mark></h4>
                <blockquote class="blockquote">
                    <p>{{this.stars}} Stars</p>
                    <p>{{this.text}}</p>
                    <footer class="blockquote-footer">{{this.date}}</footer>
                </blockquote>
              	<div class="line"></div>
            </div>
            {{/each}}
            <div class="class4">More comments</div>
    </div>
</div>





